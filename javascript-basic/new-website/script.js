const flipkart = {
  header: [
    {
      headerLogo_icon:
        "https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/flipkart-plus_8d85f4.png",
      headerLogo_p: "Explore",
      headerLogo_span: "Plus",
      headerLogo_plus:
        "https://static-assets-web.flixcart.com/fk-p-linchpin-web/fk-cp-zion/img/plus_aef861.png",
      searchBar_placeholder: "Search for products, brands and more ",
      searchBar_searchIcon: "assets/search-icon.svg",
      login: "Login",
      seller: "Become a Seller",
      More_span: "More",
      More_icon: "assets/down-arrow-nav.svg",
      cart_icon: "cart-icon.svg",
      cart_span: "Cart",
    },
  ],

  subNav: [
    {
      text: "Electronics",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "TVs & Appliances",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Men",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Women",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "BAby & Kids",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Home & Furniture",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Sports, Books & More",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Flights",
      image: "assets/down-arrow-nav.svg",
    },
    {
      text: "Offer Zone",
      image: "assets/down-arrow-nav.svg",
    },
  ],

  left: {
    topDiv: [
      {
        head: "Filter",
        catHead: "categories",
        greytxt: "Mobiles & Accessories",
        blacktxt: "Mobiles",
        image: "assets/down-arrow-nav.svg",
      },
    ],
    section1: [{}],
    section2: [
      {
        title: "BRAND",
        searchBarIcon: "searchBarIcon.svg",
        searchBarText: "Search Brand",
        options: ["SAMSUNG", "vivo", "OPPO", "realme", "POCO", "MOTOROLA"],
        more: "171 MORE",
      },
    ],
    section3: [
      {
        fLogo: "assets/fassured.png",
        question: "?",
      },
    ],
    section4: [
      {
        title: "CUSTOMER RATINGS",
        options: ["4★ & above", "3★ & above"],
      },
    ],
  },

  right: {
    div1: [
      {
        path: "Home>Mobiles&Appliances",
        result: "Showing 1 – 24 of 9,883 results for ",
        filters: [
          {
            text: "Sort By",
          },
          {
            text: "Relevence",
            cls: "relevence",
          },
          {
            text: "Popularity",
            cls: "popularity",
          },
          {
            text: "Price -- Low to High",
            cls: "lowtoHigh",
          },
          {
            text: "Price -- High to Low",
            cls: "hightoLow",
          },
          {
            text: "Newest First",
            cls: "newstFirst",
          },
        ],
      },
    ],
    rightSections: [
      {
        image:
          "https://rukminim2.flixcart.com/image/312/312/xif0q/mobile/a/c/k/-original-imagtc5fuzkvczr7.jpeg?q=70",
        name: "Apple iPhone 15",
        color: "Pink",
        storage: "256 GB",
        price: "81,999",
        originalPrice: "89900",
        discount: "8% off",
        delivery: "Free delivery",
        specialOffers: "Save extra with combo offers",
        stock: "",
        display: "15.49 cm (6.1 inch) Super Retina XDR Display",
        cameras: "48MP + 12MP | 12MP Front Camera",
        processor: "A16 Bionic Chip, 6 Core Processor",
        warranty:
          "1 Year Warranty for Phone and 6 Months Warranty for In-Box Accessories",
        ratings: 4.6,
        ratingStar: "",
        reviews: 2408,
        Ratings: 2408,
        fLogo: "assets/fassured.png",
        heart: "assets/grey-heart.svg",
        money: "81999",
      },
      {
        image:
          "https://rukminim2.flixcart.com/image/312/312/xif0q/mobile/b/o/y/g04s-pb360000in-motorola-original-imahfc48vgh8yvgj.jpeg?q=70",
        name: "Motorola g04s",
        color: "Concord Black",
        storage: "64 GB",
        ratings: 4.2,
        ratingStar: "",
        reviews: 550,
        Ratings: 9783,
        ram: "| 4 GB RAM",
        expandable: "| Expandable Upto 1 TB",
        display: "16.76 cm (6.6 inch) HD+ Display",
        cameras: "50MP Rear Camera | 5MP Front Camera",
        battery: "5000 mAh Battery",
        processor: "T606 Processor",
        warranty: "1 Year on Handset and 6 Months on Accessories",
        price: "6,999",
        originalPrice: "9,999",
        discount: "30% off",
        delivery: "Free delivery",
        specialOffers: "Saver Deal",
        Exchange: "Upto ₹3,950 Off on Exchange",
        stock: "",
        fLogo: "assets/fassured.png",
        heart: "assets/grey-heart.svg",
        money: 6999,
      },
      {
        image:
          "https://rukminim2.flixcart.com/image/312/312/xif0q/mobile/c/4/d/-original-imaghx9qygjjg8hz.jpeg?q=70",
        name: "POCO M6 5G",
        color: "Galactic Black",
        rom: "128 GB",
        storage: "128 GB",
        ratings: 4.3,
        ratingStar: "",
        storage: "6 GB RAM | 128 GB ROM | Expandable Upto 1 TB",
        Ratings: "24,306",
        reviews: "1,287",
        display: "17.12 cm (6.74 inch) HD+ Display",
        cameras: "50MP Rear Camera | 8MP Front Camera",
        battery: "5000 mAh Battery",
        processor: "Mediatek Dimensity 6100+ Processor",
        warranty:
          "1 Year Manufacturer Warranty for Phone and 6 Months Warranty for In the Box Accessories",
        price: "9,999",
        originalPrice: "13,999",
        discount: "28% off",
        delivery: "Free delivery",
        specialOffers: "Saver Deal",
        Exchange: "Upto ₹7,600 Off on Exchange",
        stock: "",
        fLogo: "assets/fassured.png",
        heart: "assets/grey-heart.svg",
        money: 9999,
      },
    ],
  },
};

document.addEventListener("DOMContentLoaded", function () {
  function main() {
    function createheader() {
      const navBar = document.querySelector(".nav-bar-margin");
      flipkart.header.forEach((item) => {
        const headerLogo = document.createElement("div");
        headerLogo.className = "header-logo";
        headerLogo.innerHTML = `<img src="${item.headerLogo_icon}">
        <a class="link"> <p>${item.headerLogo_p} <span> ${item.headerLogo_span}</span> <img src=${item.headerLogo_plus}></p> </a>`;
        navBar.appendChild(headerLogo);
        const searchBar = document.createElement("div");
        searchBar.className = "header-search-bar";
        searchBar.innerHTML = `<div class="search-bg wht-bg">
                <input class="search-input" type="text" placeholder="${item.searchBar_placeholder}">
                <div class="seach-img">
                <img src="${item.searchBar_searchIcon}"></div>
                </div>`;
        navBar.appendChild(searchBar);
        const Login = document.createElement("div");
        Login.className = "login";
        Login.innerHTML = ` <a class="login-link wht-bg clr-bl">${item.login}</a>`;
        navBar.appendChild(Login);
        const Seller = document.createElement("div");
        Seller.className = "seller";
        Seller.innerHTML = `<a class="seller-link">${item.seller}</a>`;
        navBar.appendChild(Seller);
        const More = document.createElement("div");
        More.className = "more";
        More.innerHTML = `<a class="more-link">${item.More_span}</a><img src="${item.More_icon}"/>`;
        navBar.appendChild(More);
        const Cart = document.createElement("div");
        Cart.className = "cart";
        navBar.appendChild(Cart);
        Cart.innerHTML = `<a class=cart-link><img src="${item.cart_icon}"><span>${item.cart_span}<span>`;
        navBar.appendChild(Cart);
      });
    }
    function createsubnav() {
      const subnavBar = document.querySelector(".sub-nav-margin");
      flipkart.subNav.forEach((item) => {
        const subnavItem = document.createElement("div");
        subnavItem.className = "sub-nav-item";
        subnavItem.innerHTML = `<span>${item.text}</span><img src="${item.image}">`;
        subnavBar.appendChild(subnavItem);
      });
    }

    const bodySection = document.querySelector(".body-section");
    function createLeftsideBar() {
      const leftSidebar = document.createElement("div");
      leftSidebar.className = "left";
      bodySection.append(leftSidebar);

      const top = document.createElement("div");
      top.className = "top-left";
      flipkart.left.topDiv.forEach((item) => {
        leftSidebar.append(top);
        const filter = document.createElement("section");
        filter.className = "filter-hd";
        filter.innerHTML = `<span>${item.head}</span> <div class="filter-list-hidden"></div>`;
        top.append(filter);
        const categories = document.createElement("section");
        categories.className = "categories";
        categories.innerHTML = `<div><span>${item.catHead}</span></div>
          <div class="grey"><img src="${item.image}"><a>${item.greytxt}</a></div>
          <div class="bold"><img src="${item.image}"><a>${item.blacktxt}</a></div>`;
        top.append(categories);
      });

      flipkart.left.section2.forEach((item) => {
        const Section = document.createElement("section");
        Section.className = "section sec2";
        const title = document.createElement("div");
        title.className = "left-sec-title";
        title.innerHTML = `<span>${item.title}</span>`;
        Section.append(title);
        const sectionBody = document.createElement("div");
        sectionBody.className = "left-sec-body";
        const clearAll = document.createElement("div");
        clearAll.className = "remove-items";
        clearAll.innerHTML = `<span class="icon">✕</span><span class="text">Clear all</span>`;
        sectionBody.append(clearAll);
        clearAll.style.display = "none";
        const searchbar = document.createElement("div");
        searchbar.className = "left-sec-searchbar";

        searchbar.innerHTML = `<img src="${item.searchBarIcon}"><input class="sec2-search-input" placeholder="${item.searchBarText}">`;
        sectionBody.append(searchbar);
        function createTicklist() {
          const sectionBodyul = document.createElement("ul");
          sectionBodyul.className = "checkbox-ul";
          flipkart.left.section2[0].options.forEach((item) => {
            const sectionbdli = document.createElement("li");
            sectionbdli.className = "checkbox-li";
            sectionbdli.innerHTML = `<input class="sec2-input"type="checkbox"><span>${item}</span>`;
            sectionBodyul.append(sectionbdli);
          });
          sectionBody.append(sectionBodyul);
        }

        createTicklist();
        const more = document.createElement("div");
        more.className = "left-sec-more";
        more.innerHTML = `<span>${item.more}<span>`;
        sectionBody.append(more);
        Section.append(sectionBody);
        top.append(Section);
      });

      flipkart.left.section3.forEach((item) => {
        const Section = document.createElement("section");
        Section.className = "section sec3";
        const sec3label = document.createElement("label");
        sec3label.className = "lavel-sec3";
        sec3label.innerHTML = `<input type="checkbox"> <img src="${item.fLogo}">`;
        Section.append(sec3label);
        const question = document.createElement("div");
        question.className = "question-sec3";
        question.innerHTML = `<span>?</span>`;
        Section.append(question);
        top.append(Section);
      });

      const bottom = document.createElement("div");
      bottom.className = "bottom-left";
      leftSidebar.append(bottom);
    }
    function createRightSections() {
      const rightMainbar = document.createElement("div");
      rightMainbar.className = "right";

      const rightHead = document.createElement("div");
      rightHead.className = "rightHead";
      const headDiv = document.createElement("div");
      headDiv.className = "head-div";

      flipkart.right.div1.forEach((item) => {
        const path = document.createElement("div");
        path.className = "path";
        path.innerHTML = `<span>${item.path}</span>`;
        headDiv.append(path);

        const results = document.createElement("div");
        results.className = "results";
        results.innerHTML = `<span>${item.result}</span>`;
        headDiv.append(results);

        const filterBar = document.createElement("div");
        filterBar.className = "filter-bar";
        item.filters.forEach((filter) => {
          const filterText = document.createElement("div");
          filterText.className = "filter-txt";
          filterText.innerHTML = `<span class="${filter.cls}">${filter.text}</span>`;
          filterBar.append(filterText);
        });
        headDiv.append(filterBar);

        rightHead.append(headDiv);

        const emptyHeadDiv = document.createElement("div");
        emptyHeadDiv.className = "emptyhead-div";
        rightHead.append(emptyHeadDiv);
      });

      rightMainbar.append(rightHead);
      const rightSections = document.createElement("div");
      rightSections.className = "right-sec";

      flipkart.right.rightSections.forEach((item) => {
        const rightSection = createRightSection(item);
        rightSections.append(rightSection);
      });
      rightMainbar.append(rightSections);
      bodySection.append(rightMainbar);
    }
    createLeftsideBar();
    createRightSections();

    function createRightSection(item) {
      const rightSection = document.createElement("section");
      rightSection.className = "right-Section";

      const imgRel = document.createElement("div");
      imgRel.className = "img-rel";
      const imageDiv = document.createElement("div");
      imageDiv.className = "image-div";
      imageDiv.innerHTML = `
        <img src="${item.image}">
        <div class="compare">
          <div><input type="checkbox"></div>
          <span>Add to Compare</span>
        </div>
        <div class="heart"><img src="${item.heart}"></div>`;
      imgRel.append(imageDiv);
      rightSection.append(imgRel);

      const row = document.createElement("div");
      row.className = "row";
      const rowLeft = document.createElement("div");
      rowLeft.className = "row-left";
      rowLeft.innerHTML = `<h2>${item.name} (${item.storage})</h2>`;

      const subTitle = document.createElement("div");
      subTitle.className = "sub-title";
      subTitle.innerHTML = `
        <div class="rating-btn">
          <span>${item.ratings}</span>
          <img src="${item.ratingStar}">
        </div>`;

      const reviews = document.createElement("div");
      reviews.className = "reviews";
      reviews.innerHTML = `<span>${item.Ratings} Ratings & ${item.reviews} Reviews</span>`;
      subTitle.append(reviews);

      rowLeft.append(subTitle);

      const features = document.createElement("ul");
      features.className = "features";
      features.innerHTML = `
        <li>${item.storage} ROM</li>
        <li>${item.display}</li>
        <li>${item.cameras}</li>
        <li>${item.processor}</li>
        <li>${item.warranty}</li>`;
      rowLeft.append(features);

      row.append(rowLeft);

      const rowRight = document.createElement("div");
      rowRight.className = "row-right";
      const priceDetails = document.createElement("div");
      priceDetails.className = "price-details";

      const price = document.createElement("div");
      price.className = "price";
      price.innerHTML = `
        <span class="curr-price">₹${item.price}</span>
        <div class="org-price">₹${item.originalPrice}<span class="discount">${item.discount}</span></div>`;
      priceDetails.append(price);

      const delivery = document.createElement("span");
      delivery.className = "delivery";
      delivery.innerHTML = `${item.delivery}`;
      priceDetails.append(delivery);

      rowRight.append(priceDetails);

      const fLogo = document.createElement("div");
      fLogo.className = "f-logo";
      fLogo.innerHTML = `<img src="${item.fLogo}">`;
      rowRight.append(fLogo);

      const pdiv = document.createElement("div");
      pdiv.innerHTML = `
        <div class="offers"><span>${item.specialOffers}</span></div>
        <div class="stock"><span>${item.stock}</span></div>`;
      rowRight.append(pdiv);

      row.append(rowRight);

      rightSection.append(row);

      return rightSection;
    }
    createheader();
    createsubnav();
    // filters-----

    // searchbar--
    const searchInput = document.querySelector(".search-input");
    searchInput.addEventListener("input", function () {
      const query = this.value.toLowerCase();
      const rightMainbar = document.querySelector(".right-sec");
      rightMainbar.innerHTML = "";

      flipkart.right.rightSections.forEach((item) => {
        if (item.name.toLowerCase().includes(query)) {
          const rightSection = createRightSection(item);
          rightMainbar.appendChild(rightSection);
        }
      });
    });
    // sort by--
    const priceElement1 = document.querySelector(".lowtoHigh");
    priceElement1.addEventListener("click", function () {
      const rightMainbar = document.querySelector(".right-sec");
      rightMainbar.innerHTML = "";
      const sortedSections = flipkart.right.rightSections.sort(
        (a, b) => a.money - b.money
      );
      sortedSections.forEach((item) => {
        const rightSection = createRightSection(item);
        rightMainbar.appendChild(rightSection);
      });
    });
    const priceElement2 = document.querySelector(".hightoLow");
    priceElement2.addEventListener("click", function () {
      const rightMainbar = document.querySelector(".right-sec");
      rightMainbar.innerHTML = "";
      const sortedSections = flipkart.right.rightSections.sort(
        (a, b) => b.money - a.money
      );
      sortedSections.forEach((item) => {
        const rightSection = createRightSection(item);
        rightMainbar.appendChild(rightSection);
      });
    });

    //tickbox clear all functionality--
    const checkboxStates = {};
    function createTicklist() {
      const sectionBodyul = document.createElement("ul");
      sectionBodyul.className = "checkbox-ul";

      flipkart.left.section2[0].options.forEach((item) => {
        const sectionbdli = document.createElement("li");
        sectionbdli.className = "checkbox-li";
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.className = "sec2-input";
        // checkbox.checked = checkboxStates[item] || false;

        checkbox.addEventListener("change", function () {
          checkboxStates[item] = checkbox.checked;
          updateClearAllVisibility();
          updateFilterList();
        });

        sectionbdli.append(checkbox, document.createTextNode(item));
        sectionBodyul.append(sectionbdli);
      });

      const existingUl = document.querySelector(".checkbox-ul");
      const sectionBody = document.querySelector(".left-sec-body");
      if (existingUl) {
        sectionBody.replaceChild(sectionBodyul, existingUl);
      } else {
        sectionBody.appendChild(sectionBodyul);
      }

      updateClearAllVisibility();
      updateFilterList();
    }
    const checkbox = document.querySelector(".sec2-input");
    checkbox.addEventListener("change", function () {
      checkboxStates[item] = checkbox.checked;
      updateClearAllVisibility();
      updateFilterList();
    });

    function updateClearAllVisibility() {
      const clearAll = document.querySelector(".remove-items");
      const isAnyChecked = Object.values(checkboxStates).some(
        (checked) => checked
      );
      clearAll.style.display = isAnyChecked ? "block" : "none";
    }

    function updateFilterList() {
      const filterList = document.querySelector(".filter-list-hidden");
      filterList.innerHTML = "";

      Object.keys(checkboxStates).forEach((item) => {
        if (checkboxStates[item]) {
          const itemDiv = document.createElement("div");
          const closeButton = document.createElement("div");
          closeButton.textContent = "x";
          closeButton.style.cursor = "pointer";
          const itemSpan = document.createElement("span");
          itemSpan.textContent = item;

          closeButton.addEventListener("click", () => {
            checkboxStates[item] = false;
            updateClearAllVisibility();
            updateFilterList();

            const checkboxes = document.querySelectorAll(
              ".checkbox-ul input[type='checkbox']"
            );
            checkboxes.forEach((checkbox) => {
              const label = checkbox.nextSibling.textContent;
              if (label === item) {
                checkbox.checked = false;
              }
            });
          });

          itemDiv.append(closeButton, itemSpan);
          filterList.appendChild(itemDiv);
        }
      });
    }

    const clearAll = document.querySelector(".remove-items");
    clearAll.addEventListener("click", () => {
      document.querySelectorAll(".sec2-input").forEach((checkbox) => {
        checkbox.checked = false;
        const label = checkbox.nextSibling.textContent;
        checkboxStates[label] = false;
      });
      clearAll.style.display = "none";
      updateFilterList();
    });

    const sec2SearchInput = document.querySelector(".sec2-search-input");
    sec2SearchInput.addEventListener("input", function () {
      const query = this.value.toLowerCase();
      const checkboxul = document.querySelector(".checkbox-ul");

      checkboxul.innerHTML = "";

      flipkart.left.section2[0].options.forEach((item) => {
        if (item.toLowerCase().includes(query)) {
          const sectionbdli = document.createElement("li");
          sectionbdli.className = "checkbox-li";

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.className = "sec2-input";
          checkbox.checked = checkboxStates[item] || false;
          checkbox.addEventListener("change", function () {
            checkboxStates[item] = checkbox.checked;
            updateClearAllVisibility();
            updateFilterList();
          });

          sectionbdli.append(checkbox, document.createTextNode(item));
          checkboxul.appendChild(sectionbdli);
        }
      });
      updateClearAllVisibility();
      updateFilterList();
    });
    createTicklist();
  }
  main();
});
